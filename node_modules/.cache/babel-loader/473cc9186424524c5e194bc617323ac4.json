{"remainingRequest":"/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/node_modules/babel-loader/lib/index.js!/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/src/views/category/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/src/views/category/Category.vue","mtime":1585591998000},{"path":"/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhuyuqing/Desktop/mall/vue-shop-master-2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgU2xpZGVCYXIgZnJvbSAiLi9jaGlsZHJlbi9TbGlkZUJhciI7CmltcG9ydCBOYXZCYXIgZnJvbSAiQC9jb21wb25lbnRzL2NvbW1vbi9uYXZiYXIvTmF2QmFyIjsKaW1wb3J0IHsgZ2V0Q2F0ZWdvcnkgYXMgX2dldENhdGVnb3J5LCBnZXRDYXRlZ29yeURldGFpbCBhcyBfZ2V0Q2F0ZWdvcnlEZXRhaWwsIGdldFN1YmNhdGVnb3J5IGFzIF9nZXRTdWJjYXRlZ29yeSB9IGZyb20gIkAvbmV0d29yay9jYXRlZ29yeSI7CmltcG9ydCBTdWJjYXRlZ29yeSBmcm9tICIuL2NoaWxkcmVuL1N1YmNhdGVnb3J5IjsKaW1wb3J0IFNjcm9sbCBmcm9tICJAL2NvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwiOwppbXBvcnQgVGFiQ29udHJvbCBmcm9tICJAL2NvbXBvbmVudHMvY29udGVudC90YWJDb250cm9sL1RhYkNvbnRyb2wiOwppbXBvcnQgR29vZHNMaXN0IGZyb20gIkAvY29tcG9uZW50cy9jb250ZW50L2dvb2RzL0dvb2RzTGlzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2F0ZWdvcnkiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDliIbnsbvlhoXlrrnmlbDmja4KICAgICAgc3ViY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgY2F0ZWdvcnlEZXRhaWxMaXN0OiBbXSwKICAgICAgLy8g5YiG57G75L6n6L655qCP5pWw5o2uCiAgICAgIGNhdGVnb3J5TGlzdDogW10sCiAgICAgIHRpdGxlTGlzdDogWyLmtYHooYwiLCAi5paw5qy+IiwgIueyvumAiSJdLAogICAgICBjdXJyZW50SW5kZXg6IDAsCiAgICAgIC8vIOWtmOWCqGtleQogICAgICBrZXlMaXN0OiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEdvb2RzTGlzdDogR29vZHNMaXN0LAogICAgVGFiQ29udHJvbDogVGFiQ29udHJvbCwKICAgIFNjcm9sbDogU2Nyb2xsLAogICAgU3ViY2F0ZWdvcnk6IFN1YmNhdGVnb3J5LAogICAgTmF2QmFyOiBOYXZCYXIsCiAgICBTbGlkZUJhcjogU2xpZGVCYXIKICB9LAogIG1ldGhvZHM6IHsKICAgIHNsaWRlQmFySXRlbUNsaWNrOiBmdW5jdGlvbiBzbGlkZUJhckl0ZW1DbGljayhfcmVmKSB7CiAgICAgIHZhciBtYWl0S2V5ID0gX3JlZi5tYWl0S2V5LAogICAgICAgICAgaW5kZXggPSBfcmVmLmluZGV4OwogICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGluZGV4OyAvLyDmr4/mrKHliIfmjaLliIbnsbvliJ3lp4vljJZ0YWJDb250cm9s55qE5LiL5qCHCgogICAgICB0aGlzLiRyZWZzLnRhYkNvbnRyb2wuY3VySW5kZXggPSAwOyAvLyDor7fmsYLlr7nlupTnmoTmjqjojZDliJfooagKCiAgICAgIHRoaXMuZ2V0Q2F0ZWdvcnlEZXRhaWwodGhpcy5jYXRlZ29yeUxpc3RbdGhpcy5jdXJyZW50SW5kZXhdLm1pbmlXYWxsa2V5LCAicG9wIik7IC8vIOWmguaenGtleUxpc3TkuK3lrZjlnKhtYWl0S2V56K+B5piO5pWw5o2u5bey57uP6K+35rGC6L+H5LqGCgogICAgICBpZiAodGhpcy5rZXlMaXN0LmluY2x1ZGVzKG1haXRLZXkpKSByZXR1cm4gdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsgLy8g5aaC5p6c5LiN5a2Y5Zyo6K+35rGC5pWw5o2u5bm25LiU5a2Y5YKoa2V5CgogICAgICB0aGlzLmtleUxpc3RbaW5kZXhdID0gbWFpdEtleTsKICAgICAgdGhpcy5nZXRTdWJjYXRlZ29yeSh0aGlzLmNhdGVnb3J5TGlzdFt0aGlzLmN1cnJlbnRJbmRleF0ubWFpdEtleSwgaW5kZXgpOwogICAgfSwKICAgIGdldENhdGVnb3J5OiBmdW5jdGlvbiBnZXRDYXRlZ29yeSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF9nZXRDYXRlZ29yeSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhLmNhdGVnb3J5Lmxpc3QpOwogICAgICAgIF90aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhLmNhdGVnb3J5Lmxpc3Q7CgogICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5nZXRTdWJjYXRlZ29yeShfdGhpcy5jYXRlZ29yeUxpc3RbMF0ubWFpdEtleSwgMCk7CgogICAgICAgICAgX3RoaXMuZ2V0Q2F0ZWdvcnlEZXRhaWwoX3RoaXMuY2F0ZWdvcnlMaXN0WzBdLm1pbmlXYWxsa2V5LCAicG9wIik7IC8vIOWIneWni+WMlnB1c2jnrKzkuIDkuKprZXnov5vljrsKCgogICAgICAgICAgX3RoaXMua2V5TGlzdC5wdXNoKF90aGlzLmNhdGVnb3J5TGlzdFswXS5tYWl0S2V5KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0U3ViY2F0ZWdvcnk6IGZ1bmN0aW9uIGdldFN1YmNhdGVnb3J5KGtleSwgaW5kZXgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBfZ2V0U3ViY2F0ZWdvcnkoa2V5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5saXN0KTsKICAgICAgICBfdGhpczIuc3ViY2F0ZWdvcnlMaXN0W2luZGV4XSA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgIH0pOwogICAgfSwKICAgIGdldENhdGVnb3J5RGV0YWlsOiBmdW5jdGlvbiBnZXRDYXRlZ29yeURldGFpbChrZXksIHR5cGUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBfZ2V0Q2F0ZWdvcnlEZXRhaWwoa2V5LCB0eXBlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIF90aGlzMy5jYXRlZ29yeURldGFpbExpc3QgPSByZXM7CiAgICAgIH0pOwogICAgfSwKICAgIHRhYkNsaWNrOiBmdW5jdGlvbiB0YWJDbGljayhpbmRleCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsKICAgICAgdmFyIHR5cGVMaXN0ID0gWyJwb3AiLCAibmV3IiwgInNlbGwiXTsgLy8g5YiH5o2i57G75Z6L5pWw5o2uCgogICAgICB0aGlzLmdldENhdGVnb3J5RGV0YWlsKHRoaXMuY2F0ZWdvcnlMaXN0W3RoaXMuY3VycmVudEluZGV4XS5taW5pV2FsbGtleSwgdHlwZUxpc3RbaW5kZXhdKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENhdGVnb3J5KCk7CiAgfSwKICBkZWFjdGl2YXRlZDogZnVuY3Rpb24gZGVhY3RpdmF0ZWQoKSB7CiAgICAvLyDmr4/mrKHnprvlvIDmgaLlpI1sb2FkaW5n5Yqg6L29CiAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsKICB9Cn07"},{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"category\">\n    <nav-bar class=\"category-nav-bar\">\n      <div slot=\"center\">商品分类</div>\n    </nav-bar>\n    <slide-bar :slide-bar-list=\"categoryList\" @slideBarItemClick=\"slideBarItemClick\" />\n    <scroll class=\"scroll-height\">\n      <subcategory :category-list=\"subcategoryList[currentIndex]\" />\n      <tab-control :titles=\"titleList\" @tabClick=\"tabClick\" ref=\"tabControl\" />\n      <goods-list :goods=\"categoryDetailList\" />\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport SlideBar from \"./children/SlideBar\";\nimport NavBar from \"@/components/common/navbar/NavBar\";\nimport { getCategory, getCategoryDetail, getSubcategory } from \"@/network/category\";\nimport Subcategory from \"./children/Subcategory\";\nimport Scroll from \"@/components/common/scroll/Scroll\";\nimport TabControl from \"@/components/content/tabControl/TabControl\";\nimport GoodsList from \"@/components/content/goods/GoodsList\";\n\nexport default {\n  name: \"Category\",\n  data() {\n    return {\n      // 分类内容数据\n      subcategoryList: [],\n      categoryDetailList: [],\n      // 分类侧边栏数据\n      categoryList: [],\n      titleList: [\"流行\", \"新款\", \"精选\"],\n      currentIndex: 0,\n      // 存储key\n      keyList: []\n    };\n  },\n  components: { GoodsList, TabControl, Scroll, Subcategory, NavBar, SlideBar },\n  methods: {\n    slideBarItemClick({ maitKey, index }) {\n      this.currentIndex = index;\n      // 每次切换分类初始化tabControl的下标\n      this.$refs.tabControl.curIndex = 0;\n      // 请求对应的推荐列表\n      this.getCategoryDetail(this.categoryList[this.currentIndex].miniWallkey, \"pop\");\n      // 如果keyList中存在maitKey证明数据已经请求过了\n      if (this.keyList.includes(maitKey)) return this.$store.commit(\"setLoading\", false);\n      this.$store.commit(\"setLoading\", true);\n      // 如果不存在请求数据并且存储key\n      this.keyList[index] = maitKey;\n      this.getSubcategory(this.categoryList[this.currentIndex].maitKey, index);\n    },\n    getCategory() {\n      getCategory().then(res => {\n        // console.log(res.data.category.list);\n        this.categoryList = res.data.category.list;\n        this.$nextTick(() => {\n          this.getSubcategory(this.categoryList[0].maitKey, 0);\n          this.getCategoryDetail(this.categoryList[0].miniWallkey, \"pop\");\n          // 初始化push第一个key进去\n          this.keyList.push(this.categoryList[0].maitKey);\n        });\n      });\n    },\n    getSubcategory(key, index) {\n      getSubcategory(key).then(res => {\n        // console.log(res.data.list);\n        this.subcategoryList[index] = res.data.list;\n      });\n    },\n    getCategoryDetail(key, type) {\n      getCategoryDetail(key, type).then(res => {\n        // console.log(res);\n        this.categoryDetailList = res;\n      });\n    },\n    tabClick(index) {\n      this.$store.commit(\"setLoading\", true);\n      const typeList = [\"pop\", \"new\", \"sell\"];\n      // 切换类型数据\n      this.getCategoryDetail(this.categoryList[this.currentIndex].miniWallkey, typeList[index]);\n    }\n  },\n  created() {\n    this.getCategory();\n  },\n  deactivated() {\n    // 每次离开恢复loading加载\n    this.$store.commit(\"setLoading\", true);\n  }\n};\n</script>\n\n<style scoped>\n.category-nav-bar {\n  font-weight: 600;\n  color: white;\n  background-color: #ff8198;\n}\n\n.scroll-height {\n  position: fixed;\n  top: 44px;\n  right: 0;\n  bottom: 50px;\n  left: 100px;\n  overflow: hidden;\n}\n</style>\n"],"sourceRoot":"src/views/category"}]}